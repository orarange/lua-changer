# Stormworks Lua Script Replacer (lua-changer)

シンプルな WinForms アプリケーションで、Stormworks のビークル XML 内に埋め込まれた Lua スクリプトを検出・置換するツールです。

主な特徴
- XML 内の Lua スクリプトを自動検出（検出プレフィックスで判定）
- 選択したスクリプトをエディットして XML に書き戻し可能
- 変更したスクリプトに対して保存時に自動で検出プレフィックスを付与するオプション
- 最近使ったファイルを保持し、ドロップダウンで素早く切り替え可能


使い方（概要）
- メニューから `ファイル -> ビークルXMLを開く...` を選び XML を読み込みます。
- 左上のドロップダウン（最近使ったファイル）から別の XML を選択して切り替えできます。
- スクリプト一覧から対象を選び、右側のエディタで編集 → `置換` で置換を反映します（置換したのみでは XML ファイルは書き換わりません）。
- `XMLを保存` / `名前を付けて保存...` でファイルをディスクへ書き出します。保存時に、置換したスクリプトへ検出用プレフィックスが無ければ、確認ダイアログが表示されます。

設定と永続化
- 設定（検出プレフィックス、テーマ、最近使ったファイル、確認ダイアログの抑止）は `settings.json` に保存されます。
- デフォルトの保存場所は実行ファイルのあるフォルダ（書き込み不可なら `%APPDATA%\StormworksLuaReplacer` にフォールバック）です。
- 設定から保存先パスを指定することもできます。

注意事項 / デバッグ

- もしクラッシュが発生する場合は、再現手順（どの操作で発生したか）と例外メッセージ／スタックトレースを教えてください。

貢献
- 単一ソースファイルで実装されているため、まずは `lua-replacer.cs` を参照してください。
- 変更を加えたらビルドして動作検証を行い、差分を pull request で送るとスムーズです。

## ライセンス

本プロジェクトはカスタムライセンス「CRP-1.0（Custom Redistribution-Prohibited License）」の下で配布されています。以下はその要約です。

- 許可: 商用利用およびソフトウェアの改変を許可します。
- 禁止: ソース・バイナリを問わず、第三者への再配布（配布・販売・公開）は禁止されています。著作権者（リポジトリ管理者）が書面で明示的に許可した場合を除きます。
- 貢献: 改変を公開・配布したい場合は、必ず本リポジトリへプルリクエスト（PR）を提出してください。管理者が承認・マージした場合に限り、その変更の配布が認められることがあります。
- 帰属: 内部利用を含め、ソースを保持する場合は著作権表示と本ライセンス文の保持をお願いします。
- 免責: ソフトウェアは無保証で提供されます（詳細は `LICENSE` を参照してください）。

LICENSE ファイルはリポジトリのルートにあります: `LICENSE` 。

注意: 本ライセンスは再配布を禁止するため OSI の「オープンソース定義」には該当しません。企業での配布や第三者への配布を行う予定がある場合は、事前にリポジトリ管理者へ連絡して再配布の許可を取得してください。

---
もし README に追加して欲しい使用例やスクリーンショット、FAQ があれば教えてください。README を更新します。
